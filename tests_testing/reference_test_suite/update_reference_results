#!/usr/bin/env bash

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && cd ../../ && pwd )" # Root directory

#######################################################################################################
#
#   Update reference results
#       - Copies reference_test_suite/src/test to tests_staging/src/test
#       - Runs ../run_mutant_tests to generate test results for reference solution
#       - Renames test_staging/testsuite_results.json to test_staging/reference_results.json
#
#######################################################################################################

cd "$DIR/tests_testing/"
echo "[Update Reference Results] Copying files..."
rm -f testsuite_results.json
rm -f reference_results.json
rm -rf tests_staging/src/test/*
cp -r reference_test_suite/src/test/* tests_staging/src/test/
./run_mutant_tests
mv testsuite_results.json reference_results.json